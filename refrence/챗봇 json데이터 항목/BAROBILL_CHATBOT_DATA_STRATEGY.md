# 바로빌 챗봇 데이터 관리 전략 및 워크플로우 제안

> **작성일**: 2025-01-15  
> **목적**: 기획자 친화적인 엑셀 → JSON 자동 변환 시스템 구축

---

## 📊 현재 시스템 분석

### 1. 현재 JSON 구조 (barobill-knowledge.json)

```json
{
  "metadata": {
    "version": "버전",
    "updated_at": "날짜",
    "description": "설명"
  },
  "synonyms": {
    "대표어": ["동의어1", "동의어2"]
  },
  "items": [
    {
      "id": "고유ID",
      "type": "intent | knowledge | case",
      "category": "카테고리",
      "title": "질문 제목",
      "description": "상세 설명 (선택)",
      "keywords": ["키워드1", "키워드2"],
      "negativeKeywords": ["제외할키워드"],
      "priority": 1-10,
      "responses": {
        "formal": "격식체 답변",
        "casual": "해요체 답변",
        "plain": "평어체 답변"
      },
      "relatedGuides": [
        {
          "title": "가이드명",
          "url": "URL",
          "icon": "아이콘"
        }
      ]
    }
  ]
}
```

### 2. 현재 엑셀 구조 분석

**파일**: `바로빌_챗봇_질문_리스트업.xlsx`

| 대분류 | 콘텐츠 내용(질문) | 종류 |
|--------|------------------|------|
| 소상공인 | 전자세금계산서는 꼭 발급해야 하나요? | 개념 |
| 회계 | 수정세금계산서 종류별 차이를 알려주세요. | 개념 |

**문제점**:
- ❌ 답변 내용 없음 (별도 작성 필요)
- ❌ 키워드 정의 없음
- ❌ 우선순위 설정 없음
- ❌ 어투별 답변 구분 없음
- ⚠️ JSON으로 수동 변환 필요

---

## 🎯 제안: 기획자 친화적 엑셀 템플릿

### 📝 신규 엑셀 템플릿 구조

#### Sheet 1: 질문&답변 (Main)

| ID | 구분 | 대분류 | 질문 | 설명 | 우선순위 | 키워드 | 제외키워드 | 날짜템플릿 | 격식체 답변 | 해요체 답변 | 평어체 답변 | 관련가이드URL | 비고 |
|-----|------|---------|------|------|----------|---------|-------------|-------------|-------------|-------------|-------------|--------------|------|
| KB001 | 개념 | 소상공인 | 전자세금계산서는 꼭 발급해야 하나요? | 전자세금계산서 발급 의무 안내 | 7 | 전자세금계산서,필수,의무,꼭 | 수정,취소 | - | (격식체 답변 작성) | (해요체 답변 작성) | (평어체 답변 작성) | https://... | - |
| KB002 | 개념 | 회계 | 수정세금계산서 종류별 차이를 알려주세요. | 8 | 수정세금계산서,종류,차이 | - | (격식체 답변 작성) | (해요체 답변 작성) | (평어체 답변 작성) | https://... | - |

#### Sheet 2: 동의어 사전 (Synonyms)

| 대표어 | 동의어1 | 동의어2 | 동의어3 | 동의어4 | 동의어5 |
|--------|---------|---------|---------|---------|---------|
| 세금계산서 | 세계서 | 계산서 | 전자세금계산서 | 전세계 | - |
| 발급 | 발행 | 작성 | 만들기 | 생성 | - |
| 환입 | 반품 | 환불 | 리턴 | 반환 | - |

#### Sheet 3: 카테고리 매핑 (Category Mapping)

| 구분 | JSON type | 우선순위 기본값 | 설명 |
|------|-----------|----------------|------|
| 인사 | intent | 10 | 인사말, 자기소개 등 |
| 개념 | knowledge | 5-6 | 기본 개념 설명 |
| 문제해결 | case | 7-8 | 실무 문제 해결 |
| 실무가이드 | knowledge | 6 | 업무 절차 안내 |
| 실무노하우 | knowledge | 5 | 팁과 노하우 |

---

## 🔄 엑셀 → JSON 자동 변환 프로세스

### 단계별 워크플로우

```
1. 기획자: 엑셀 템플릿 작성
   ↓
2. Claude/Script: 엑셀 → JSON 자동 변환
   ↓
3. 개발자: JSON 파일을 프로젝트에 통합
   ↓
4. QA: 챗봇 테스트 및 피드백
   ↓
5. 기획자: 엑셀 수정 (반복)
```

### 변환 규칙

| 엑셀 컬럼 | JSON 필드 | 변환 규칙 |
|-----------|-----------|-----------|
| ID | id | 그대로 사용 (예: KB001) |
| 구분 | type | 카테고리 매핑 참조 |
| 대분류 | category | 그대로 사용 |
| 질문 | title | 그대로 사용 |
| 설명 | description | 그대로 사용 (선택, 없으면 생략) |
| 우선순위 | priority | 숫자 그대로 (1-10) |
| 키워드 | keywords | 쉼표로 분리하여 배열 생성 |
| 제외키워드 | negativeKeywords | 쉼표로 분리하여 배열 생성 |
| 날짜템플릿 | dateTemplate | Y/YES/TRUE/1/예/O → true, 그 외 → 생략 |
| 격식체 답변 | responses.formal | 그대로 사용 |
| 해요체 답변 | responses.casual | 그대로 사용 |
| 평어체 답변 | responses.plain | 그대로 사용 |
| 관련가이드URL | relatedGuides | URL 파싱하여 객체 배열 생성 |

---

## 📋 상세 작성 가이드

### 1. ID 작성 규칙

```
형식: [타입코드][카테고리약어][일련번호]

타입코드:
- INT: Intent (인사)
- KB: Knowledge Base (개념/가이드/노하우)
- CASE: Case (문제해결)

카테고리약어:
- TX: 세금계산서
- VAT: 부가가치세
- CERT: 인증서
- SVC: 바로빌서비스

예시:
- INT-GREET-001: 인사 > 인사말 #1
- KB-TX-001: 세금계산서 > 개념 #1
- CASE-TX-RETURN-001: 세금계산서 > 반품처리 케이스 #1
```

### 2. 우선순위 설정 가이드

| 우선순위 | 적용 대상 | 설명 |
|----------|-----------|------|
| 10 | 인사/자기소개 | 가장 먼저 매칭 |
| 9 | 중요 Case (날짜 포함) | 특정 상황 대응 |
| 8 | 일반 Case / 중요 FAQ | 자주 묻는 문제 |
| 7 | 일반 Case | 실무 문제 |
| 6 | 중요 Knowledge | 핵심 개념 |
| 5 | 일반 Knowledge | 기본 정보 |
| 4 | 서비스 안내 | 부가 정보 |

**점수 계산 공식**:
```
최종 점수 = (키워드 매칭 × 10) + (제목 매칭 × 20) + 우선순위
→ 15점 이상이어야 답변 제공
```

### 3. 키워드 작성 팁

**DO ✅**:
- 다양한 표현 포함: "발급, 발행, 작성, 만들기"
- 오타 포함: "세계서, 전세계" (자주 틀리는 오타)
- 관련 용어: "수정세금계산서, 수정발급, 마이너스"

**DON'T ❌**:
- 너무 일반적인 단어: "것", "하다", "이다"
- 조사: "을", "를", "의", "가"
- 불필요한 반복: 제목과 100% 동일한 키워드

### 4. 제외 키워드 (Negative Keywords) 활용

**용도**: 특정 단어가 있으면 이 항목을 절대 선택하지 않도록 필터링

**예시**:
```
질문: "세금계산서 발급 방법"
→ 제외키워드: "취소, 수정, 반품, 환입"
→ 이유: "세금계산서 취소 방법" 질문에는 매칭되지 않도록
```

### 5. 어투별 답변 작성 가이드

#### Formal (격식체)
- **톤**: 공식적, 격식 있는 표현
- **종결어미**: ~입니다, ~하십시오, ~하시면 됩니다
- **예시**:
```
세금계산서 발급은 [매출문서 작성] 메뉴에서 가능합니다.

1. 바로빌에 로그인하십시오
2. '세금계산서 발급' 메뉴를 선택하십시오
3. 공급받는자 정보를 입력하십시오

발급 즉시 국세청에 자동으로 전송됩니다.
```

#### Casual (해요체)
- **톤**: 친근하고 부드러운 존댓말
- **종결어미**: ~에요, ~해요, ~돼요, ~거예요
- **이모지 활용**: 적극 활용 😊
- **예시**:
```
세금계산서 발급? [매출문서 작성] 메뉴에서 하면 돼요!

받는 사람 정보랑 금액 적고 전자서명하면 끝이에요. 바로 국세청에 자동 전송돼요! 📤
```

#### Plain (평어체)
- **톤**: 간결하고 설명적
- **종결어미**: ~함, ~임, ~됨
- **예시**:
```
세금계산서 발급은 [매출문서 작성] 메뉴에서 진행함. 거래처 정보와 금액을 입력 후 발급하면 국세청 자동 전송됨.
```

### 6. 관련 가이드 URL 작성

**형식**:
```
타이틀|URL|아이콘

예시:
발급 가이드 보러가기|https://www.barobill.co.kr/guide/issue|📘
```

**구분자**: `|` (파이프)

**아이콘 예시**:
- 📘 문서 가이드
- 🎥 동영상 튜토리얼
- 📥 다운로드 자료
- 🔗 외부 링크

---

## 🛠️ 변환 스크립트 사용법

### 준비물
1. Python 3.8 이상
2. 필요 라이브러리: `pandas`, `openpyxl`

### 설치
```bash
pip install pandas openpyxl
```

### 실행
```bash
python excel_to_json_converter.py --input 바로빌_챗봇_데이터.xlsx --output barobill-knowledge.json
```

### 검증
```bash
python validate_knowledge_base.py --file barobill-knowledge.json
```

---

## 📊 작업 체크리스트

### 엑셀 작성 시
- [ ] ID를 고유하게 부여했는가?
- [ ] 우선순위가 적절한가? (1-10)
- [ ] 키워드가 다양하게 포함되었는가? (최소 3개 이상)
- [ ] 3가지 어투 모두 작성되었는가?
- [ ] 답변이 150자 이상인가?
- [ ] 제외 키워드가 필요한 경우 작성했는가?

### 변환 후
- [ ] JSON 문법 오류가 없는가?
- [ ] 모든 항목이 정상 변환되었는가?
- [ ] 중복 ID가 없는가?
- [ ] 챗봇 테스트를 진행했는가?

---

## 🎓 Best Practices

### 1. 답변 품질 높이기

**DO ✅**:
- 구체적인 절차를 단계별로 작성
- 실제 메뉴명을 [대괄호]로 강조
- 주의사항이나 팁 추가
- 관련 가이드 링크 제공

**DON'T ❌**:
- 너무 짧은 답변 (50자 미만)
- 애매한 표현 ("아마도", "~것 같습니다")
- 전문 용어만 나열
- 오래된 정보

### 2. 키워드 최적화

**전략**:
1. 사용자가 실제로 검색할 단어 사용
2. 동의어와 오타를 동의어 사전에 등록
3. 제외 키워드로 혼동 방지
4. 날짜 패턴 포함 (예: "2025년 11월 20일", "11월 20일")

### 3. 우선순위 조정 전략

**시나리오**:
- 자주 묻는 질문 → 우선순위 UP (7→8)
- 거의 안 묻는 질문 → 우선순위 DOWN (7→5)
- 날짜 특정 Case → 최고 우선순위 (9)

---

## 🔧 문제 해결 (Troubleshooting)

### Q1. 변환 스크립트가 실행되지 않아요
**A**: Python 버전과 라이브러리 설치를 확인하세요.
```bash
python --version  # 3.8 이상
pip list | grep pandas
```

### Q2. JSON 파일이 깨져요
**A**: 엑셀에서 특수문자(따옴표, 줄바꿈)를 확인하세요.
- 따옴표: " → \"
- 줄바꿈: Alt+Enter 사용

### Q3. 챗봇이 답변을 못 찾아요
**A**: 키워드 매칭 점수를 확인하세요.
- 최소 15점 필요
- 키워드를 더 추가하거나 우선순위 UP

### Q4. 중복 답변이 나와요
**A**: 제외 키워드를 활용하세요.
```
예시:
항목 A: "세금계산서 발급" → 제외키워드: "취소, 수정"
항목 B: "세금계산서 취소" → 제외키워드: "발급"
```

---

## 📈 데이터 확장 로드맵

### Phase 1 (현재 - 2025 Q1)
- [x] 기본 질문 66개 정리
- [ ] 3가지 어투 답변 작성
- [ ] 키워드 최적화
- [ ] 우선순위 설정

### Phase 2 (2025 Q2)
- [ ] 상황별 Case 추가 (100개)
- [ ] 날짜 템플릿 활용
- [ ] 동의어 사전 확장 (200개)
- [ ] 관련 가이드 링크 추가

### Phase 3 (2025 Q3)
- [ ] 실무 노하우 추가 (50개)
- [ ] 피드백 분석 및 반영
- [ ] 검색 품질 향상
- [ ] Markdown 답변 고도화

### Phase 4 (2025 Q4)
- [ ] 총 500개 이상 항목 구축
- [ ] AI 백업 시스템 고도화
- [ ] 다국어 지원 (영어)
- [ ] 음성 입력 지원

---

## 📞 문의 및 지원

**기획팀 문의**: planning@barobill.co.kr  
**개발팀 문의**: dev@barobill.co.kr  
**긴급 지원**: Slack #chatbot-support

---

**문서 버전**: v1.0  
**최종 수정일**: 2025-01-15  
**작성자**: AI Development Team
